(function(){"use strict";var a=angular.module("angular-geo",[]);a.constant("angularGeo_msgs",{"errors.unsupportedBrowser":"Browser geolocation not supported","errors.noServices":"angularGeo could not locate any of the geo providers specified, verify that you have them properly linked","errors.noProviders":"angularGeo requires at least one geo provider"}),a.provider("angularGeo",function(){var a,b={providerSvcNames:[],providers:[]},c=!1,d=0;return{addProvider:function(a){return b.providerSvcNames.push(a),this},$get:function(e,f,g,h,i,j,k){if(c="geolocation"in j.navigator,0===b.providerSvcNames.length)throw new Error(k.errors.noProviders);for(var l=0;l<b.providerSvcNames.length;l++)i.has(b.providerSvcNames[l])?b.providers.push(i.get(b.providerSvcNames[l])):e.error("angularGeo could not locate service "+b.providerSvcNames[l]);var m=b.providers;if(0===m.length)throw new Error(k.errors.noServices);var n=function(a,b,c,e,g,h){var i=h||f.defer(),j=m[d].geocode(a,b,c,e,g);return j.then(function(a){i.resolve(a)},function(f){return 1===m.length?void i.reject(f):(d<m.length-1?d++:d=0,n(a,b,c,e,g,i))}),i.promise},o=function(a,b,c,e,g,h){var i=h||f.defer(),j=m[d].reverseGeocode(a,b,c,e,g);return j.then(function(a){i.resolve(a)},function(f){return 1===m.length?void i.reject(f):(d<m.length-1?d++:d=0,o(a,b,c,e,g,i))}),i.promise};return{geocode:function(a,b,c,d,e){return n(a,b,c,d,e,null)},reverseGeocode:function(){},getCurrentPosition:function(a,b){if(!c)throw new Error(k.errors.unsupportedBrowser);var d=f.defer();return j.navigator.geolocation.getCurrentPosition(function(a){if(b){var c=o({latitude:a.coords.latitude,longitude:a.coords.longitude},null,null,null,null);c.then(function(a){d.resolve(a)},function(a){d.reject(a)})}else d.resolve(a)},function(a){d.reject(a)},a),d.promise},watchPosition:function(b){if(!c)throw new Error(k.errors.unsupportedBrowser);var d=f.defer();return a=j.navigator.geolocation.watchPosition(function(a){h.$broadcast("angulargeo:watchposition",a)},function(a){d.reject(a)},b),d.promise},clearWatch:function(){if(!c)throw new Error(k.errors.unsupportedBrowser);j.navigator.geolocation.clearWatch(a)}}}}})}).call(this);